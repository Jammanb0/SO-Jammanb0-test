name: Notify Discord on PR Comment by Jammanb0

on:
  issue_comment:
    types: [created]

jobs:
  notify-discord:
    if: github.event.issue.pull_request != null  # PR에 달린 코멘트인지 확인
    runs-on: ubuntu-latest

    steps:
      - name: Check comment author
        id: check_author
        run: |
          echo "AUTHOR=${{ github.event.comment.user.login }}" >> $GITHUB_ENV

      - name: Send Discord Notification
        if: env.AUTHOR == 'Jammanb0'
        run: |
          curl -H "Content-Type: application/json" \
               -X POST \
               -d "{\"content\": \"Jammanb0님이 PR에 코멘트를 작성했습니다: '${{ github.event.comment.body }}' (링크: ${{ github.event.comment.html_url }})\"}" \
               ${{ secrets.DISCORD_WEBHOOK_URL }}
